<!DOCTYPE html>
<html lang="fr">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="icon" href="img/icon.ico" type="image/x-icon">
   <title>Redirection...</title>
   <link rel="stylesheet" href="style.css">

   <style>
      body {
         display: flex;
         flex-direction: column;
         justify-content: center;
         align-items: center;
         height: 100vh;
         margin: 0;
      }

      .h2 {
         padding: 30px;
         background-color: rgb(214, 209, 209);
         border-radius: 20px;
         text-align: center;
      }
      .a{
         padding: 10px;
         color: white;
         background-color: #0688fa;
         border-radius: 20px;
      }
   </style>
</head>
<body>
   <h1>Redirection...</h1><br>
   <h2 class="h2">En cliquant sur "Accéder" vous aurez une deuxième et dernière pub avant d'être redirigé sur votre destination final<br><span style="font-size: 20px;">Grâce à cette 2ème pub vous soutenez à garder le site en ligne. Merci !</span><br><br> <a class="a" href="">Accéder</a></h2>
   <script>
      function extractUrlFragment() {
    var fullUrl = window.location.href;
    var hashIndex = fullUrl.indexOf('#');

    if (hashIndex !== -1 && hashIndex < fullUrl.length - 1) {
        var fragment = fullUrl.substring(hashIndex + 1);
        return fragment;
    } else {
        console.log("Aucun fragment d'URL trouvé après #");
        return null;
    }
}

window.onload = function() {
    var urlFragment = extractUrlFragment();
    if (urlFragment) {
        var linkElement = document.querySelector('a.a');
        linkElement.href = urlFragment;
        loadLinkvertiseScript();
        console.log(urlFragment);

        // Supprime le fragment d'URL de la barre d'adresse
        if (window.location.hash) {
            history.replaceState("", document.title, window.location.pathname + window.location.search);
        }
    }
}

function loadLinkvertiseScript(){
   (() => {
   function loadScript(url, callback) {
   var script = document.createElement("script");
   script.type = "text/javascript";
   script.src = url;
   script.onload = callback;
   document.head.appendChild(script);
   }
   loadScript("https://cdn.work.ink/js/workink-sitescript.js", function() {
   workink("https://work.ink/1RKh/lq25bpxq", [], ["www.khaosrevelation.site/index.html","www.khaosrevelation.site/","127.0.0.1:5500","127.0.0.1:5500/index.html",]);
   });
   })();
}

      // function workink(){
      //    (() => {
      //    function loadScript(url, callback) {
      //    var script = document.createElement("script");
      //    script.type = "text/javascript";
      //    script.src = url;
      //    script.onload = callback;
      //    document.head.appendChild(script);
      //    }
      //    loadScript("https://cdn.work.ink/js/workink-sitescript.js", function() {
      //    workink("https://work.ink/1RKh/loufhu15", [], []);
      //    });
      //    })();
      // }
   </script>

</body>
</html>